#!/bin/bash

set -e

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[1;34m'
BOLD='\033[1m'
NC='\033[0m' # No Color

# Vars
ZIP_URL="https://github.com/alexkkork/install/raw/refs/heads/main/7sploit.zip"
ZIP_NAME="7sploit.zip"
APP_NAME="7sploit.app"
TMP_DIR="/tmp/7sploit_installer"

# Functions
info()    { echo -e "${BLUE}üîß $1${NC}"; }
success() { echo -e "${GREEN}‚úÖ $1${NC}"; }
warn()    { echo -e "${YELLOW}‚ö†Ô∏è  $1${NC}"; }
error()   { echo -e "${RED}‚ùå $1${NC}"; }

# Start
clear
echo -e "${BOLD}üß†  Installing 7Sploit...${NC}"

# Create temp dir
info "Creating temp directory..."
mkdir -p "$TMP_DIR"
cd "$TMP_DIR"

# Download
info "Downloading ${ZIP_NAME} from GitHub..."
curl -L --progress-bar "$ZIP_URL" -o "$ZIP_NAME"

# Unzip
info "Unpacking application..."
unzip -q "$ZIP_NAME"

# Check unzip
if [ ! -d "$APP_NAME" ]; then
    error "$APP_NAME not found after unzipping. Exiting."
    exit 1
fi

# Move
info "Installing to /Applications..."
sudo mv -f "$APP_NAME" /Applications/

# Launch
info "Launching 7Sploit..."
open -a "/Applications/$APP_NAME"

# Cleanup
info "Cleaning up..."
rm -rf "$TMP_DIR"

# Done
success "7Sploit has been successfully installed and launched! üöÄ"
